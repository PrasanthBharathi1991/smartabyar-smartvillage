{{#eq classSimpleName "TrafficFlowObserved"}}
{{#partial "htmHead"}}{{> htmHeadTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmTitle"}}{{> htmTitleTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmMeta"}}{{> htmMetaTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmStyle"}}{{> htmStyleTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmScripts"}}{{> htmScriptsTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmScript"}}{{> htmScriptTrafficFlowObservedPage}}{{/partial}}
{{#partial "websocket"}}{{> websocketTrafficFlowObservedPage}}{{/partial}}
{{#partial "jsWebsocket"}}
          if(vars.includes('customMinGreenTime') || vars.includes('customMaxGreenTime')) {
            $('#feature-' + pk + '-customMinGreenTime-slider-range').slider('values', [parseInt($response.find('.Page_customMinGreenTime').val()), parseInt($response.find('.Page_customMaxGreenTime').val())]);
            $('#feature-' + pk + '-customMinGreenTime-slider-handle').text(parseInt($response.find('.Page_customMinGreenTime').val()));
            $('#feature-' + pk + '-customMaxGreenTime-slider-handle').text(parseInt($response.find('.Page_customMaxGreenTime').val()));
          }
{{/partial}}
{{#partial "jsTooltip"}}
        if ($('#feature-' + feature.properties.pk + '-customMinGreenTime-slider-range').slider('instance') == undefined) {
          $('#feature-' + feature.properties.pk + '-customMinGreenTime-slider-range').slider({
            range: true
            , min: 1
            , max: 50
            , values: [ feature.properties.customMinGreenTime, feature.properties.customMaxGreenTime ]
            , create: function() {
              $('#feature-' + feature.properties.pk + '-customMinGreenTime-slider-handle').text(parseInt(feature.properties.customMinGreenTime));
              
              $('#feature-' + feature.properties.pk + '-customMaxGreenTime-slider-handle').text(parseInt(feature.properties.customMaxGreenTime));
            }
            , slide: function( event, ui ) {
              $('#feature-' + feature.properties.pk + '-customMinGreenTime-slider-handle').text(ui.values[0]);
              $('#feature-' + feature.properties.pk + '-customMaxGreenTime-slider-handle').text(ui.values[1]);
            }
            , stop: function( event, ui ) {
              patchTrafficFlowObservedVal([{ name: 'softCommit', value: 'true' }, { name: 'fq', value: 'pk:' + feature.properties.pk }], 'setCustomMinGreenTime', ui.values[0].toString(), function() { addGlow($('.Page_customMinGreenTime')); }, function() { addError($('.Page_customMinGreenTime')); }); 
              patchTrafficFlowObservedVal([{ name: 'softCommit', value: 'true' }, { name: 'fq', value: 'pk:' + feature.properties.pk }], 'setCustomMaxGreenTime', ui.values[1].toString(), function() { addGlow($('.Page_customMaxGreenTime')); }, function() { addError($('.Page_customMaxGreenTime')); }); 
            }
          });
        }
{{/partial}}
{{#partial "htmTooltip"}}
  <h3><i class="fa-duotone fa-map-location-dot  site-menu-icon "></i> <a href="${quoteattr(feature.properties.pageUrlPk)}">Vehicle ${feature.properties.objectTitle}</a></h3>
  <div><span class="">Waiting time tolerance:</div>
  <div id="feature-${feature.properties.pk}-customMinGreenTime-slider-range">
    <div id="feature-${feature.properties.pk}-customMinGreenTime-slider-handle" class="ui-slider-handle"></div>
    <div id="feature-${feature.properties.pk}-customMaxGreenTime-slider-handle" class="ui-slider-handle"></div>
  </div>
  <div><span class="">Queue length threshold: </span><input type="text" placeholder="queue length threshold" title="Demand scaling factor (multiplies all vehicle demands) [1, 2]. " id="Page_customQueueLengthThreshold" class="Page_customQueueLengthThreshold setCustomQueueLengthThreshold classTrafficFlowObserved inputTrafficFlowObserved4CustomQueueLengthThreshold w3-input w3-border " name="setCustomQueueLengthThreshold" onclick="removeGlow($(this)); " onchange="patchTrafficFlowObservedVal([{ name: 'softCommit', value: 'true' }, { name: 'fq', value: 'pk:${feature.properties.pk}' }], 'setCustomQueueLengthThreshold', $(this).val(), function() { addGlow($('#Page_customQueueLengthThreshold')); }, function() { addError($('#Page_customQueueLengthThreshold')); }); " value="${feature.properties.customQueueLengthThreshold}"></div>
{{/partial}}
{{#partial "jsLegend"}}{{> jsLegendTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmLegend"}}{{> htmLegendTrafficFlowObservedPage}}{{/partial}}
{{#partial "jsStyle"}}{{> jsStyleTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodySidebar"}}{{> htmBodySidebarTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyStart"}}{{> htmBodyStartTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyMiddle"}}{{> htmBodyMiddleTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyEnd"}}{{> htmBodyEndTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBody"}}{{> htmBodyTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodySearch"}}{{> htmBodySearchTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyFilters"}}{{> htmBodyFiltersTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyRange"}}{{> htmBodyRangeTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyPivot"}}{{> htmBodyPivotTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyFieldList"}}{{> htmBodyFieldListTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyStats"}}{{> htmBodyStatsTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyMenu"}}{{> htmBodyMenuTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyGraph"}}{{> htmBodyGraphTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyGraphLocation"}}{{> htmBodyGraphLocationTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyCount0"}}{{> htmBodyCount0TrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyCount1"}}{{> htmBodyCount1TrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodyAll"}}{{> htmBodyAllTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmForm"}}{{> htmFormTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmForms"}}{{> htmFormsTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmBodySuggested"}}{{> htmBodySuggestedTrafficFlowObservedPage}}{{/partial}}
{{#partial "htmButton_patchTrafficFlowObserved"}}{{> htmButtonTrafficFlowObservedPage_patchTrafficFlowObserved classApiMethodMethod="PATCH"}}{{/partial}}
{{#partial "htmForm_patchTrafficFlowObserved"}}{{> htmFormTrafficFlowObservedPage_patchTrafficFlowObserved classApiMethodMethod="PATCH"}}{{/partial}}
{{#partial "htmFormButton_patchTrafficFlowObserved"}}{{> htmFormButtonTrafficFlowObservedPage_patchTrafficFlowObserved classApiMethodMethod="PATCH"}}{{/partial}}
{{#partial "htmButton_postTrafficFlowObserved"}}{{> htmButtonTrafficFlowObservedPage_postTrafficFlowObserved classApiMethodMethod="POST"}}{{/partial}}
{{#partial "htmForm_postTrafficFlowObserved"}}{{> htmFormTrafficFlowObservedPage_postTrafficFlowObserved classApiMethodMethod="POST"}}{{/partial}}
{{#partial "htmFormButton_postTrafficFlowObserved"}}{{> htmFormButtonTrafficFlowObservedPage_postTrafficFlowObserved classApiMethodMethod="POST"}}{{/partial}}
{{#partial "htmButton_putimportTrafficFlowObserved"}}{{> htmButtonTrafficFlowObservedPage_putimportTrafficFlowObserved classApiMethodMethod="PUT"}}{{/partial}}
{{#partial "htmForm_putimportTrafficFlowObserved"}}{{> htmFormTrafficFlowObservedPage_putimportTrafficFlowObserved classApiMethodMethod="PUT"}}{{/partial}}
{{#partial "htmFormButton_putimportTrafficFlowObserved"}}{{> htmFormButtonTrafficFlowObservedPage_putimportTrafficFlowObserved classApiMethodMethod="PUT"}}{{/partial}}
{{#partial "htmButton_searchpageTrafficFlowObserved"}}{{> htmButtonTrafficFlowObservedPage_searchpageTrafficFlowObserved classApiMethodMethod="Page"}}{{/partial}}
{{#partial "htmForm_searchpageTrafficFlowObserved"}}{{> htmFormTrafficFlowObservedPage_searchpageTrafficFlowObserved classApiMethodMethod="Page"}}{{/partial}}
{{#partial "htmFormButton_searchpageTrafficFlowObserved"}}{{> htmFormButtonTrafficFlowObservedPage_searchpageTrafficFlowObserved classApiMethodMethod="Page"}}{{/partial}}
{{/eq}}
{{> TrafficFlowObservedGenPage}}
